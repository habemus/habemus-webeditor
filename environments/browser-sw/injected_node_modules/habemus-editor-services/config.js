// native
const url = require('url');

// third-party
const Bluebird = require('bluebird');

// injected
const habemusEditorUrls = require('habemus-editor-urls');

const pkg = require('../../../../package.json');

module.exports = function (habemus, options) {

  console.log('load configs for `browser-sw` environment');

  var locationString = window.location.toString();

  // get project code from the url
  var projectCode = habemusEditorUrls.parse.workspace(locationString).projectCode;
  if (!projectCode) {
    var err = new Error('could not parse projectCode');

    // error is equivalent to `NotFound`
    err.name = 'NotFound';

    throw err;
  }

  return new Bluebird(function (resolve, reject) {
    resolve({
      apiVersion: pkg.version,
      projectId: projectCode,
      projectName: projectCode,
    });
  });

};
