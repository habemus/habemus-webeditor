// native dependencies
const path = require('path');

// third-party dependencies
const Bluebird = require('bluebird');

const CONSTANTS = require('../../../../constants');

function loadConfig(habemus, options) {
  // retrieve the FS_ROOT_PATH
  // it defaults to process.cwd()
  var FS_ROOT_PATH = process.cwd();
  
  if (!FS_ROOT_PATH || FS_ROOT_PATH === '/') {
    FS_ROOT_PATH = require('electron').remote.dialog.showOpenDialog({
      properties: ['openDirectory']
    })[0];
  }

  console.log('load configs for `electron` environment');

  return {
    apiVersion: '1.0.0',
    
    // required by core
    projectId: FS_ROOT_PATH,
    projectName: path.basename(FS_ROOT_PATH),

    // electron specific options
    electron: {
      fsRootPath: FS_ROOT_PATH,
    },

    language: {
      baseURL: process.env.LANGUAGES_BASE_URL || '/resources/languages',

      fallback: 'en-US',

      languages: [
        {
          label: 'English (US)',
          key: 'en-US',
          data: require('../../../../resources/languages/en-US.json'),
        },
        {
          label: 'Português (BR)',
          key: 'pt-BR',
        },
        {
          label: '中文 (简体)',
          key: 'zn-CH',
        }
      ],
    }
  };
}

module.exports = loadConfig;
